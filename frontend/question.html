<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no">
    <title>PRIZMA</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/config.js?v=1735027890"></script>
    <script src="js/telegram-vanilla.js?v=1735027890"></script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="telegram:cache" content="false">
</head>
<body class="bodyQuestion">

<main class="main question">
    <div class="question-header">
        <div class="question-prev-button-container">
            <a href="login.html" class="steps-header-button">
                <img src="./images/arrow-prev-icon.svg" alt="">
            </a>
            <h1 class="question-num linear-text">–í–æ–ø—Ä–æ—Å <span class="current-question">1</span> –∏–∑ <span class="question-count">5</span></h1>
        </div>
        <p class="question-title" id="questionText">–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å...</p>
    </div>
    <div class="question-area-container">
        <div class="write-icon">
            <span>...</span>
            <img src="./images/pencil-icon.svg" alt="">
        </div>
        <textarea name="" id="questionArea" class="question-area" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
        <button class="micro-button">
            <img src="./images/micro-icon.svg" alt="">
        </button>
    </div>
    <button class="button-triangle" id="nextButton" onclick="submitAnswer()" style="display: none;">
        <span>–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</span>
        <img src="./images/button-triangle.svg" alt="">
    </button>
</main>

<script src="js/jquery.min.js"></script>
<script src="./js/jquery-ui.min.js"></script>
<script src="js/main-telegram.js?v=1735027890"></script>
<script>
// API configuration
const API_BASE_URL = window.location.origin;
let currentTelegramId = null;
let currentQuestionData = null;

// –ü–æ–ª—É—á–∞–µ–º Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function getTelegramUserId() {
    if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe && window.Telegram.WebApp.initDataUnsafe.user) {
        return window.Telegram.WebApp.initDataUnsafe.user.id;
    }
    // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID
    const testId = localStorage.getItem('test_telegram_id');
    if (testId) {
        return parseInt(testId);
    }
    return 123456789;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
async function loadCurrentQuestion() {
    try {
        currentTelegramId = getTelegramUserId();
        console.log('Loading question for user:', currentTelegramId);
        console.log('API_BASE_URL:', API_BASE_URL);
        
        if (!currentTelegramId) {
            throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
        }
        
        const response = await fetch(`${API_BASE_URL}/api/user/${currentTelegramId}/current-question`);
        console.log('Response status:', response.status);
        
        const data = await response.json();
        console.log('Response data:', data);
        
        if (response.ok) {
            currentQuestionData = data;
            displayQuestion(data);
        } else {
            console.error('Error loading question:', data.error);
            $('#questionText').text('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–ø—Ä–æ—Å–∞: ' + (data.error || data.detail || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
        }
    } catch (error) {
        console.error('Error loading question:', error);
        $('#questionText').text('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–ø—Ä–æ—Å–∞: ' + error.message);
    }
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
function displayQuestion(data) {
    const { question, progress, user } = data;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
    $('#questionText').text(question.text);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
    $('.current-question').text(progress.current);
    $('.question-count').text(progress.total);
    
    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º textarea
    const textarea = $('#questionArea');
    textarea.val('');
    textarea.attr('maxlength', question.max_length || 1000);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ –∞–∫–∫–∞—É–Ω—Ç–∞
    if (!user.is_paid && question.type === 'paid') {
        $('#questionText').append('<br><small style="color: #ff6b6b;">üíé –≠—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –ø—Ä–µ–º–∏—É–º-–≤–µ—Ä—Å–∏–∏</small>');
    }
    
    console.log('Question loaded:', question);
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
async function submitAnswer() {
    const answerText = $('#questionArea').val().trim();
    
    if (!answerText) {
        if (window.currentTelegramAPI && window.currentTelegramAPI.showAlert) {
            window.currentTelegramAPI.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å');
        } else if (window.TelegramWebApp && window.TelegramWebApp.showAlert) {
            window.TelegramWebApp.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å');
        } else {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å');
        }
        return;
    }
    
    if (!currentTelegramId) {
        const errorMsg = '–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
        if (window.currentTelegramAPI && window.currentTelegramAPI.showAlert) {
            window.currentTelegramAPI.showAlert(errorMsg);
        } else if (window.TelegramWebApp && window.TelegramWebApp.showAlert) {
            window.TelegramWebApp.showAlert(errorMsg);
        } else {
            alert(errorMsg);
        }
        console.error('currentTelegramId is null/undefined');
        return;
    }
    
    // –¢–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –¥–ª—è Telegram
    try {
        if (window.currentTelegramAPI && window.currentTelegramAPI.HapticFeedback) {
            window.currentTelegramAPI.HapticFeedback.impactOccurred('medium');
        } else if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.HapticFeedback) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
        }
    } catch (e) {
        console.log('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–∑–≤–∞—Ç—å —Ç–∞–∫—Ç–∏–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å:', e);
    }
    
    console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç:', {
        telegramId: currentTelegramId,
        answer: answerText,
        questionId: currentQuestionData?.question?.id
    });
    
    try {
        const response = await fetch(`${API_BASE_URL}/api/user/${currentTelegramId}/answer`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                text_answer: answerText,
                answer_type: 'text'
            })
        });
        
        console.log('üì° Response status:', response.status);
        console.log('üì° Response headers:', response.headers);
        
        const responseText = await response.text();
        console.log('üì° Raw response text:', responseText);
        
        let data;
        try {
            data = JSON.parse(responseText);
            console.log('üì° Parsed response data:', data);
        } catch (e) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', e);
            console.log('üì° Response text that failed to parse:', responseText);
            throw new Error('–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON: ' + responseText);
        }
        
        if (response.ok) {
            console.log('‚úÖ –û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ');
            console.log('üìä Data status:', data.status);
            console.log('üìä Full data object:', JSON.stringify(data, null, 2));
            
            // –¢–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
            try {
                if (window.currentTelegramAPI && window.currentTelegramAPI.HapticFeedback) {
                    window.currentTelegramAPI.HapticFeedback.impactOccurred('light');
                } else if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.HapticFeedback) {
                    window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
                }
            } catch (e) {
                console.log('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–∑–≤–∞—Ç—å —Ç–∞–∫—Ç–∏–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:', e);
            }
            
            if (data.status === 'next_question') {
                console.log('üîÑ –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É');
                console.log('üìù Next question:', data.next_question);
                console.log('üìà Progress:', data.progress);
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
                currentQuestionData = {
                    question: data.next_question,
                    progress: data.progress,
                    user: currentQuestionData.user
                };
                
                console.log('üéØ –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –Ω–æ–≤—ã–º –≤–æ–ø—Ä–æ—Å–æ–º');
                displayQuestion(currentQuestionData);
                
                // –û—á–∏—â–∞–µ–º textarea
                $('#questionArea').val('');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                showSuccessMessage('–û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
                
            } else if (data.status === 'test_completed') {
                console.log('üèÅ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω');
                
                // –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω
                const message = data.message || '–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!';
                if (window.currentTelegramAPI && window.currentTelegramAPI.showAlert) {
                    window.currentTelegramAPI.showAlert(message);
                } else if (window.TelegramWebApp && window.TelegramWebApp.showAlert) {
                    window.TelegramWebApp.showAlert(message);
                } else {
                    alert(message);
                }
                setTimeout(() => {
                    window.location.href = 'download.html';
                }, 1500);
            } else {
                console.log('‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', data.status);
                console.log('‚ùì –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', data);
            }
        } else {
            console.error('‚ùå –û—à–∏–±–∫–∞ HTTP:', response.status, response.statusText);
            console.error('‚ùå Data:', data);
            
            const errorMsg = '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞: ' + (data.error || data.detail || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
            console.error('‚ùå Showing error:', errorMsg);
            
            if (window.currentTelegramAPI && window.currentTelegramAPI.showAlert) {
                window.currentTelegramAPI.showAlert(errorMsg);
            } else if (window.TelegramWebApp && window.TelegramWebApp.showAlert) {
                window.TelegramWebApp.showAlert(errorMsg);
            } else {
                alert(errorMsg);
            }
        }
    } catch (error) {
        console.error('üí• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞:', error);
        console.error('üí• Error name:', error.name);
        console.error('üí• Error message:', error.message);
        console.error('üí• Error stack:', error.stack);
        
        const errorMsg = '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞: ' + error.message;
        console.error('üí• Showing error alert:', errorMsg);
        
        if (window.currentTelegramAPI && window.currentTelegramAPI.showAlert) {
            window.currentTelegramAPI.showAlert(errorMsg);
        } else if (window.TelegramWebApp && window.TelegramWebApp.showAlert) {
            window.TelegramWebApp.showAlert(errorMsg);
        } else {
            alert(errorMsg);
        }
    } finally {
        // –ù–∏—á–µ–≥–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º - –ø—É—Å—Ç—å –∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
        console.log('üì§ –ó–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–µ–Ω');
    }
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
function showSuccessMessage(message) {
    const successDiv = $('<div>')
        .text(message)
        .css({
            position: 'fixed',
            top: '20px',
            left: '50%',
            transform: 'translateX(-50%)',
            background: '#4CAF50',
            color: 'white',
            padding: '10px 20px',
            borderRadius: '5px',
            zIndex: 1000
        });
    
    $('body').append(successDiv);
    
    setTimeout(() => {
        successDiv.fadeOut(() => successDiv.remove());
    }, 2000);
}

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
$(document).ready(function() {
    console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram MainButton –≤ question.html');
    
    // –í—Å–µ–≥–¥–∞ —Å–∫—Ä—ã–≤–∞–µ–º HTML –∫–Ω–æ–ø–∫—É, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ MainButton
    $('#nextButton').hide();
    console.log('üö´ HTML –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞');
    
    // –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MainButton
    function setupTelegramMainButton() {
        console.log('‚öôÔ∏è –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram MainButton...');
        console.log('  - window.TelegramWebApp:', !!window.TelegramWebApp);
        console.log('  - window.Telegram:', !!window.Telegram);
        
        // –ü—Ä–æ–±—É–µ–º –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ API
        let telegramAPI = null;
        if (window.TelegramWebApp && window.TelegramWebApp.tg && window.TelegramWebApp.tg.MainButton) {
            telegramAPI = window.TelegramWebApp.tg;
            console.log('üéØ –ò—Å–ø–æ–ª—å–∑—É–µ–º window.TelegramWebApp.tg');
        } else if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.MainButton) {
            telegramAPI = window.Telegram.WebApp;
            console.log('üéØ –ò—Å–ø–æ–ª—å–∑—É–µ–º window.Telegram.WebApp');
        }
        
        if (telegramAPI && telegramAPI.MainButton) {
            console.log('‚úÖ Telegram MainButton API –Ω–∞–π–¥–µ–Ω!');
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            try {
                telegramAPI.MainButton.offClick(submitAnswer);
                console.log('üóëÔ∏è –°—Ç–∞—Ä—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω');
            } catch (e) {
                console.log('üí° –°—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–µ –±—ã–ª–æ');
            }
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
            telegramAPI.MainButton.setText('–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å');
            telegramAPI.MainButton.show();
            
            // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
            telegramAPI.MainButton.onClick(submitAnswer);
            
            console.log('üéâ Telegram MainButton –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –ø–æ–∫–∞–∑–∞–Ω–∞!');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
            window.currentTelegramAPI = telegramAPI;
            return true;
            
        } else {
            console.log('‚ùå Telegram MainButton API –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            console.log('  - telegramAPI:', !!telegramAPI);
            console.log('  - MainButton:', !!(telegramAPI && telegramAPI.MainButton));
            return false;
        }
    }
    
    // –ü—Ä–æ–±—É–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å MainButton –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Å –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
    let attempts = 0;
    const maxAttempts = 10;
    
    function trySetupMainButton() {
        attempts++;
        console.log(`üîÑ –ü–æ–ø—ã—Ç–∫–∞ ${attempts}/${maxAttempts} –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MainButton`);
        
        if (setupTelegramMainButton()) {
            console.log('‚úÖ MainButton —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!');
            return;
        }
        
        if (attempts < maxAttempts) {
            const delay = attempts * 200; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É —Å –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
            console.log(`‚è∞ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ ${delay}–º—Å`);
            setTimeout(trySetupMainButton, delay);
        } else {
            console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å MainButton –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫');
            console.log('üîç –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤:');
            console.log('  - window.TelegramWebApp:', window.TelegramWebApp);
            console.log('  - window.Telegram:', window.Telegram);
        }
    }
    
    // –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–ø—ã—Ç–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    trySetupMainButton();
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ textarea
    $('#questionArea').on('keydown', function(e) {
        if (e.ctrlKey && e.keyCode === 13) { // Ctrl+Enter
            submitAnswer();
        }
    });
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å
    loadCurrentQuestion();
    
    // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π ID
    if (!localStorage.getItem('test_telegram_id')) {
        localStorage.setItem('test_telegram_id', '123456789');
    }
    
    console.log('‚úÖ –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è question.html');
});
</script>
</body>
</html>