from .base import BasePrompts


class PsychologyPrompts(BasePrompts):
    """Промпты для психологического анализа личности (только уникальные инструкции для каждой страницы)"""
    
    @classmethod
    def get_personality_type_prompt(cls) -> str:
        """
        Промпт для страницы 3: "Кто вы по типу личности?"
        Только уникальные требования к содержанию страницы, без дублирования базового промта.
        """
        return '''Первая строка — заголовок:Кто вы по типу личности?
1. MBTI-тип:
В 2–3 предложениях назовите результат теста (например, ENTJ) и кратко, понятно опишите, 
что этот тип означает именно для вас. Объясните, как его особенности проявляются в вашей повседневной жизни, работе, 
отношениях или принятии решений. Обязательно включите одну ключевую цитату из ваших ответов (в кавычках), 
которая наиболее ярко иллюстрирует проявление этого типа в вашей жизни, и коротко поясните её смысл. 
Не используйте дополнительные цитаты — только одну, самую характерную.


2. Big Five: Опишите, как каждый из пяти факторов проявляется в вашей жизни. 
Для факторов экстраверсия и нейротизм обязательно приведите по одной цитате из ваших ответов (в кавычках) и объясните, 
как это влияет на вашу повседневность, решения или отношения с людьми. 
Для остальных трёх факторов — открытость опыту, сознательность и доброжелательность — достаточно развернутого объяснения без цитат.


Структура описания:
Экстраверсия: Опишите уровень вашей общительности, энергичности и взаимодействия с людьми. Приведите цитату из ответов, иллюстрирующую это, и поясните её влияние на вашу жизнь.
Открытость опыту: Расскажите о вашей готовности к новому, любознательности и творческом подходе без цитат.
Сознательность: Опишите вашу организованность, ответственность и умение планировать, без цитат.
Доброжелательность: Раскройте степень вашей эмпатии, отзывчивости и способности к сотрудничеству, без цитат.
Нейротизм: Опишите эмоциональную чувствительность, склонность к стрессу и тревоге, приведите цитату из ответов и объясните, как это отражается на вашем самочувствии и поведении.

3. Архетип(ы) Юнга:
Определите 1 доминирующий архетип пользователя согласно теории Карла Юнга (например: Герой, Мудрец, Творец, Наставник, Исследователь, Правитель, Бунтарь, Тень, Самость и др). В 1–2 развернутых предложениях объясните, как этот архетип влияет именно на вашу мотивацию, поведение и принятие решений:
 • Покажите, какие внутренние побуждения, ценности или страхи формируются под влиянием этого архетипа (например: стремление к преодолению трудностей, поиск новых знаний, желание вдохновлять других, потребность в стабильности или свободе).
 • Опишите, как архетип проявляется в ваших действиях: что вы склонны выбирать в сложных ситуациях, как реагируете на вызовы, что мотивирует вас двигаться вперёд.
 • Кратко укажите, как этот архетип влияет на стиль принятия решений — например, склонность к риску, опора на интуицию, стремление к гармонии или лидерству.


Пример формулировки:
Ваш доминирующий архетип — Герой. Это проявляется в вашей внутренней потребности преодолевать трудности и брать на себя ответственность за результат. 
Вы склонны активно искать вызовы, не боитесь сложных задач и мотивированы идеей личного роста. 
В принятии решений вы чаще выбираете путь, который требует усилий, но позволяет почувствовать себя победителем и вдохновить других своим примером.

4. Уникальность:
В отдельном абзаце выделите, чем именно сочетание личностных черт клиента делает его особенным. 
Проанализируйте, какие необычные или редко встречающиеся качества проявляются в его ответах, и как они взаимодействуют между собой. 
Приведите примеры, как эти черты проявляются в жизни, работе или отношениях. 
Если уместно, используйте числовые данные или проценты для наглядности (например: «Такое сочетание встречается менее чем у 10% людей»). 
Объясните, почему именно эта комбинация качеств может быть его сильным конкурентным преимуществом или уникальной точкой роста. 
Добавьте 1–2 предложения о том, как пользователь может использовать свою уникальность для достижения целей или построения личного бренда.

Критически важно: объем всей информации страницы строго 2000–2500 символов. НЕ ПРЕВЫШАЙТЕ!'''

    @classmethod  
    def get_decision_making_prompt(cls) -> str:
        """
        Промпт для страницы 4: "Как вы мыслите и принимаете решения?"
        Только уникальные требования к содержанию страницы, без дублирования базового промта.
        """
        return '''Первая строка — заголовок: Как вы мыслите и принимаете решения?
        Критически важно: объем всей информации этого блока строго 1900–2000 символов. Не превышайте!

1. Проанализируй и подробно опиши когнитивный стиль клиента, учитывая особенности восприятия и обработки информации. 
2. Раскрой, как клиент анализирует ситуации и делает выводы, выдели его подход к решению проблем и принятию решений. 
3. Определи баланс между логикой и интуицией в мышлении клиента, укажи, в каких ситуациях он предпочитает рациональный анализ, а когда полагается на внутреннее чутьё. 
4. Выдели 3–4 ключевые жизненные ценности клиента и объясни, как каждая из них влияет на его выборы и решения. 

Итоговый текст должен читаться как глубокий инсайт о мышлении и принятии решений клиента. Текст должен быть логичным, глубоким, персонализированным и опираться исключительно на данные клиента без поверхностных формулировок. Обращайся напрямую к клиенту на «вы».
Критически важно: объем всей информации этого блока строго 1900–2000 символов. Не превышайте!'''

    @classmethod
    def get_limiting_patterns_prompt(cls) -> str:
        """
        Промпт для страницы 5: "Какие паттерны ограничивают ваше развитие?"
        Только уникальные требования к содержанию страницы, без дублирования базового промта.
        """
        return '''
        Первая строка — заголовок: Какие паттерны ограничивают ваше развитие?
        Критически важно: объем всей информации этого блока строго 1900–2000 символов. Не превышайте!

Проанализируй и опиши, какие паттерны ограничивают развитие клиента, строго следуя структуре:
1. Назови 2 повторяющихся модели поведения (например, перфекционизм, тревожность, самокритика и/или другие). Для каждой модели в одном предложении опиши, как она проявляется у клиента и мешает его прогрессу. Что он может чувствовать из-за них.
2. Выдели 2 ограничивающих убеждения, используя формулировки из ответов клиента (например, «Если я не…»). Для каждого убеждения в одном предложении объясни, как оно блокирует инициативу клиента и к каким последствиям может приводить.
3. В одном предложении укажи, как эти установки сформировались на фоне детского опыта, критики и/или других психологических травм, и в каких ситуациях они сейчас проявляются особенно остро.
4. Дай два конкретных персонализированных шага или техники (по 1–2 предложения на каждый), которые помогут клиенту трансформировать эти паттерны в ресурс для себя.'''

    @classmethod
    def get_context_prompts_map(cls) -> dict:
        """
        Карта соответствия типов страниц и промптов для контекстного режима
        """
        return {
            "page3": cls.get_personality_type_prompt,
            "page4": cls.get_decision_making_prompt, 
            "page5": cls.get_limiting_patterns_prompt
        } 